import{s as V}from"./password.esm.4b0b8871.js";import{b as S,a as N,c as r}from"./toast.esm.ce455301.js";import{s as C}from"./dropdown.esm.fb1295c7.js";import{g as x,a0 as I,$ as U,o as D,c as R,b as d,u as o,a as s,y as q,v as $,V as f,r as v,p as E,d as k}from"./index.096ac52f.js";import{s as A}from"./scrollpanel.esm.ac2c8879.js";import{_ as T,R as P,U as B,S as M}from"./plugin-vue_export-helper.1b5df2d2.js";import{l as O,y as Q,i as F,u as G,R as H,D as j}from"./index.browser.esm2017.493ab2a2.js";const i=u=>(E("data-v-6f9cbb08"),u=u(),k(),u),J={class:"muniform"},L={class:"container"},z=i(()=>s("div",{style:{width:"100%",padding:"10px"}},[s("h3",null,"Registrarme")],-1)),K={class:"field",style:{width:"100%"}},W=i(()=>s("label",{for:"dni"},"DNI:",-1)),X={class:"field",style:{width:"100%"}},Y=i(()=>s("label",{for:"password"},"Contrase\xF1a",-1)),Z={class:"field",style:{width:"100%"}},ee=i(()=>s("label",{for:"name"},"Nombres:",-1)),te={class:"field",style:{width:"100%"}},se=i(()=>s("label",{for:"lastName"},"Apellidos:",-1)),ae={class:"field",style:{width:"100%"}},le=i(()=>s("label",{for:"address"},"Direccion:",-1)),oe={class:"field",style:{width:"100%"}},de=i(()=>s("label",{for:"phone"},"Telefono:",-1)),ie={class:"field",style:{width:"100%"}},ne=i(()=>s("label",{for:"question"},"Pregunta secreta:",-1)),re={class:"field",style:{width:"100%"}},ue=i(()=>s("label",{for:"answer"},"Respuesta:",-1)),me=i(()=>s("br",null,null,-1)),pe={__name:"Signup",setup(u){const _=x().appContext.config.globalProperties.$firebaseApp,b=O(_),m=I(),e=U({dni:null,name:null,lastName:null,address:null,phone:null,secretQuestion:null,secretAnswer:null}),h=[{name:"\xBFCual es el nombre de tu padre?"},{name:"\xBFCual es el nombre de tu madre?"},{name:"\xBFCual es el nombre de tu abuelo?"},{name:"\xBFCual es el nombre de tu abuela?"},{name:"\xBFCual es tu heroe favorito?"},{name:"\xBFCual es la fecha de vencimiento de tu DNI?"},{name:"\xBFCual es el nombre de tu primera mascota?"}],n=(l,t)=>l?(m.add({severity:"error",summary:"MuniHuaura",detail:t,life:3e3}),!1):!0,y=async()=>{let l=!0;if(l=l&&n(!e.value.dni,"DNI es requerido"),l=l&&n(!e.value.name,"Nombres es requerido"),l=l&&n(!e.value.lastName,"Apellidos es requerido"),l=l&&n(!e.value.address,"Direccion es requerido"),l=l&&n(!e.value.phone,"Telefono es requerido"),!l)return;console.log("Pasaron las validaciones");let t=Q(b,P),a=F(t,G("dni","==",e.value.dni.toString())),w=(await H(a)).docs.map(g=>g.data());if(l=n(w.length>0,"DNI ya est\xE1 registrado"),!l)return;console.log("Paso la validacion del DNI");let p=await j(t,e.value),c={...e.value};c.id=p.id,localStorage.setItem(B,p.id),sessionStorage.setItem(M,JSON.stringify(c)),m.add({severity:"success",summary:"MuniHuaura",detail:"Ciudadano registrado correctamente",life:3e3}),setTimeout(()=>{v.push({name:"S002"})},3001)};return(l,t)=>(D(),R($,null,[d(o(S),{position:"bottom-left",style:{width:"90%"}}),s("main",J,[d(o(A),{style:{width:"100%",height:"100%"}},{default:q(()=>[s("div",L,[z,s("div",K,[W,d(o(N),{id:"dni",modelValue:e.value.dni,"onUpdate:modelValue":t[0]||(t[0]=a=>e.value.dni=a),useGrouping:!1,style:{width:"100%"}},null,8,["modelValue"])]),s("div",X,[Y,d(o(V),{id:"password",modelValue:e.value.password,"onUpdate:modelValue":t[1]||(t[1]=a=>e.value.password=a),feedback:!1,toggleMask:"",style:{width:"100%"}},null,8,["modelValue"])]),s("div",Z,[ee,d(o(r),{id:"name",type:"text",modelValue:e.value.name,"onUpdate:modelValue":t[2]||(t[2]=a=>e.value.name=a),style:{width:"100%"}},null,8,["modelValue"])]),s("div",te,[se,d(o(r),{id:"lastName",type:"text",modelValue:e.value.lastName,"onUpdate:modelValue":t[3]||(t[3]=a=>e.value.lastName=a),style:{width:"100%"}},null,8,["modelValue"])]),s("div",ae,[le,d(o(r),{id:"address",type:"text",modelValue:e.value.address,"onUpdate:modelValue":t[4]||(t[4]=a=>e.value.address=a),style:{width:"100%"}},null,8,["modelValue"])]),s("div",oe,[de,d(o(r),{id:"phone",type:"text",modelValue:e.value.phone,"onUpdate:modelValue":t[5]||(t[5]=a=>e.value.phone=a),style:{width:"100%"}},null,8,["modelValue"])]),s("div",ie,[ne,d(o(C),{modelValue:e.value.secretQuestion,"onUpdate:modelValue":t[6]||(t[6]=a=>e.value.secretQuestion=a),options:h,optionLabel:"name",optionValue:"name",style:{width:"100%"}},null,8,["modelValue"])]),s("div",re,[ue,d(o(r),{id:"question",type:"text",modelValue:e.value.secretAnswer,"onUpdate:modelValue":t[7]||(t[7]=a=>e.value.secretAnswer=a),style:{width:"100%"}},null,8,["modelValue"])]),me,d(o(f),{onClick:y,label:"Registrarme",style:{width:"100%"}}),d(o(f),{onClick:t[8]||(t[8]=a=>o(v).go(-1)),label:"Regresar",class:"p-button-outlined p-button-info",style:{width:"100%"}})])]),_:1})])],64))}};var Se=T(pe,[["__scopeId","data-v-6f9cbb08"]]);export{Se as default};
