import{s as S}from"./password.esm.48898d87.js";import{b as N,a as C,c as r}from"./toast.esm.77871ee5.js";import{s as x}from"./dropdown.esm.dc49e054.js";import{g as I,a0 as U,$ as D,o as R,c as q,b as d,u as o,a as s,y as $,v as E,V as _,r as f,p as k,d as A}from"./index.f1d981da.js";import{s as T}from"./scrollpanel.esm.b43acbca.js";import{_ as M,R as O,U as P,S as B}from"./plugin-vue_export-helper.6144179f.js";import{l as Q,y as j,i as F,u as G,R as H,D as J}from"./index.browser.esm2017.51ab8bc7.js";const i=u=>(k("data-v-7d58508a"),u=u(),A(),u),L={class:"muniform"},z={class:"container"},K=i(()=>s("div",{style:{width:"100%",padding:"10px"}},[s("h3",null,"Registrarme")],-1)),W={class:"field",style:{width:"100%"}},X=i(()=>s("label",{for:"dni"},"DNI:",-1)),Y={class:"field",style:{width:"100%"}},Z=i(()=>s("label",{for:"password"},"Contrase\xF1a",-1)),ee={class:"field",style:{width:"100%"}},te=i(()=>s("label",{for:"name"},"Nombres:",-1)),se={class:"field",style:{width:"100%"}},ae=i(()=>s("label",{for:"lastName"},"Apellidos:",-1)),le={class:"field",style:{width:"100%"}},oe=i(()=>s("label",{for:"address"},"Direccion:",-1)),de={class:"field",style:{width:"100%"}},ie=i(()=>s("label",{for:"phone"},"Telefono:",-1)),ne={class:"field",style:{width:"100%"}},re=i(()=>s("label",{for:"question"},"Pregunta secreta:",-1)),ue={class:"field",style:{width:"100%"}},me=i(()=>s("label",{for:"answer"},"Respuesta:",-1)),pe=i(()=>s("br",null,null,-1)),ce={__name:"Signup",setup(u){const h=I().appContext.config.globalProperties.$firebaseApp,y=Q(h),p=U(),e=D({dni:null,name:null,lastName:null,address:null,phone:null,secretQuestion:null,secretAnswer:null}),w=[{name:"\xBFCual es el nombre de tu padre?"},{name:"\xBFCual es el nombre de tu madre?"},{name:"\xBFCual es el nombre de tu abuelo?"},{name:"\xBFCual es el nombre de tu abuela?"},{name:"\xBFCual es tu heroe favorito?"},{name:"\xBFCual es la fecha de vencimiento de tu DNI?"},{name:"\xBFCual es el nombre de tu primera mascota?"}],n=(l,t)=>l?(p.add({severity:"error",summary:"MuniHuaura",detail:t,life:3e3}),!1):!0,g=async()=>{let l=!0;if(l=l&&n(!e.value.dni,"DNI es requerido"),l=l&&n(!e.value.name,"Nombres es requerido"),l=l&&n(!e.value.lastName,"Apellidos es requerido"),l=l&&n(!e.value.address,"Direccion es requerido"),l=l&&n(!e.value.phone,"Telefono es requerido"),!l)return;console.log("Pasaron las validaciones");let t=j(y,O),a=F(t,G("dni","==",e.value.dni.toString())),b=(await H(a)).docs.map(V=>V.data());if(l=n(b.length>0,"DNI ya est\xE1 registrado"),!l)return;console.log("Paso la validacion del DNI");let m=Object.assign({},e.value);m.dni=m.dni.toString();let c=await J(t,m),v={...m};v.id=c.id,localStorage.setItem(P,c.id),sessionStorage.setItem(B,JSON.stringify(v)),p.add({severity:"success",summary:"MuniHuaura",detail:"Ciudadano registrado correctamente",life:3e3}),setTimeout(()=>{f.push({name:"S002"})},3001)};return(l,t)=>(R(),q(E,null,[d(o(N),{position:"bottom-left",style:{width:"90%"}}),s("main",L,[d(o(T),{style:{width:"100%",height:"100%"}},{default:$(()=>[s("div",z,[K,s("div",W,[X,d(o(C),{id:"dni",modelValue:e.value.dni,"onUpdate:modelValue":t[0]||(t[0]=a=>e.value.dni=a),useGrouping:!1,style:{width:"100%"}},null,8,["modelValue"])]),s("div",Y,[Z,d(o(S),{id:"password",modelValue:e.value.password,"onUpdate:modelValue":t[1]||(t[1]=a=>e.value.password=a),feedback:!1,toggleMask:"",style:{width:"100%"}},null,8,["modelValue"])]),s("div",ee,[te,d(o(r),{id:"name",type:"text",modelValue:e.value.name,"onUpdate:modelValue":t[2]||(t[2]=a=>e.value.name=a),style:{width:"100%"}},null,8,["modelValue"])]),s("div",se,[ae,d(o(r),{id:"lastName",type:"text",modelValue:e.value.lastName,"onUpdate:modelValue":t[3]||(t[3]=a=>e.value.lastName=a),style:{width:"100%"}},null,8,["modelValue"])]),s("div",le,[oe,d(o(r),{id:"address",type:"text",modelValue:e.value.address,"onUpdate:modelValue":t[4]||(t[4]=a=>e.value.address=a),style:{width:"100%"}},null,8,["modelValue"])]),s("div",de,[ie,d(o(r),{id:"phone",type:"text",modelValue:e.value.phone,"onUpdate:modelValue":t[5]||(t[5]=a=>e.value.phone=a),style:{width:"100%"}},null,8,["modelValue"])]),s("div",ne,[re,d(o(x),{modelValue:e.value.secretQuestion,"onUpdate:modelValue":t[6]||(t[6]=a=>e.value.secretQuestion=a),options:w,optionLabel:"name",optionValue:"name",style:{width:"100%"}},null,8,["modelValue"])]),s("div",ue,[me,d(o(r),{id:"question",type:"text",modelValue:e.value.secretAnswer,"onUpdate:modelValue":t[7]||(t[7]=a=>e.value.secretAnswer=a),style:{width:"100%"}},null,8,["modelValue"])]),pe,d(o(_),{onClick:g,label:"Registrarme",style:{width:"100%"}}),d(o(_),{onClick:t[8]||(t[8]=a=>o(f).go(-1)),label:"Regresar",class:"p-button-outlined p-button-info",style:{width:"100%"}})])]),_:1})])],64))}};var Ne=M(ce,[["__scopeId","data-v-7d58508a"]]);export{Ne as default};
