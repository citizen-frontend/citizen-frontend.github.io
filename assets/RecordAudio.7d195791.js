import{$ as h,o as n,c,b as s,y as m,u as r,a as i,m as v,V as l}from"./index.eeda083e.js";import{s as f}from"./scrollpanel.esm.98532528.js";const g={class:"muniform"},R={class:"container"},w={class:"field",style:{width:"100%"}},B={key:0},U=["src"],k={class:"field",style:{width:"100%"}},C={__name:"RecordAudio",emits:["attach"],setup(y,{emit:d}){const e=h({state:"none",audioBlob:null,audioURL:null,base64Blob:null});var t=null;const u=a=>{let o=new FileReader;o.readAsDataURL(a.data),o.onloadend=function(){e.value.base64Blob=o.result},e.value.audioURL=URL.createObjectURL(a.data)};!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia?alert("Your browser does not support recording!"):navigator.mediaDevices.getUserMedia({audio:!0}).then(a=>{t=new MediaRecorder(a),t.addEventListener("dataavailable",u)}).catch(a=>{alert(`The following error occurred: ${a}`)});const b=()=>{e.value.state="recording",t.start()},p=()=>{e.value.state="stop",t.stop()},_=()=>{d("attach",e.value.base64Blob),t=null};return(a,o)=>(n(),c("main",g,[s(r(f),{style:{width:"100%",height:"100%"}},{default:m(()=>[i("div",R,[i("div",w,[e.value.state=="recording"?(n(),c("span",B,"Grabando...")):v("",!0),i("audio",{src:e.value.base64Blob,controls:""},null,8,U)]),i("div",k,[s(r(l),{icon:"pi pi-circle-fill",class:"p-button-rounded",onClick:b,label:"Grabar"}),s(r(l),{icon:"pi pi-stop",class:"p-button-rounded p-button-danger",onClick:p,label:"Detener"})]),s(r(l),{label:"Adjuntar grabacion",onClick:_,style:{width:"100%"}})])]),_:1})]))}};export{C as default};
